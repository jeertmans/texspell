
\input{preambule}

\begin{document}

\begin{center}
  \begin{tikzpicture}
  \draw [dashed] (0,-2) -- (0,5.5);
  \draw (-4,3.5) rectangle (-1,4.5) node[midway] {Tex project};
  \draw (1,3) rectangle (4,5) node[midway,align=center] {Tex to\\ plain text};
  \draw [-latex,thick] (-1,4) -- (1,4);
  \draw (6,2) rectangle (9,4) node[midway, align=center] {Type checker};
  \draw [-latex,thick] (4,4) -- (5,4) |- (6,3);
  \draw [-latex,thick](9,3) -| (10,0) -- (4,0);
  \draw (1,1) rectangle (4,-1) node[midway] {Aggregator};
  \draw [thick,-latex] (1,0) -- (-1,0);
  \draw (-1,0.5) rectangle (-4,-0.5) node[midway]{Diff file};
  \draw [thick,-latex] (2.5,3) -- (2.5,1);

  \draw [black!50] (-4,1.5) rectangle (-1,2.5) node[midway]{Plain text};
  \draw [black!50,thick] (-1,2) -| (5,3);
  \draw [thick,-latex,black!50] (2,2) -- (2,1);
  
\end{tikzpicture}
\end{center}

\end{document}

